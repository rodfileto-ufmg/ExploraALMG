[
  {
    "objectID": "01_Explorando.html",
    "href": "01_Explorando.html",
    "title": "Explorando dados abertos da ALMG",
    "section": "",
    "text": "Seja bem vindo! Neste conjunto de documentos vamos explorar a plataforma de dados abertos da Assembléia Legislativa de Minas Gerais (ALMG).\n\n1 Importação dos dados das proposições legislativas\nVejamos primeiro como exportar os dados. Para este projeto utilizei especificamente o conjunto de arquivos de proposições em formato csv disponibilizados na plataforma da ALMG. Os arquivos foram acessados e carregados em banco de dados no formato sqlite3, o qual pode ser acessado posteriormente em diversas ferramentas para análise, tais como o python e o R.\n\n\n2 Exploração Inicial dos dados\n\n\nCódigo\nimport pandas as pd\nimport sys\nimport os\nimport sqlite3\nimport locale\n\nlocale.setlocale(locale.LC_ALL, 'pt_BR.UTF-8')\n\n# Adiciona a raiz do projeto ao sys.path\nsys.path.append(os.path.abspath(os.path.join(os.getcwd(), '..')))\n\nfrom funcoes.utils import formatar_numero_brl\n\nfrom funcoes.Figuras import create_horizontal_bar_chart_go\n\n# Caminho para o database.db na raiz do projeto\ndb_path = os.path.abspath(os.path.join(os.getcwd(), '../database.db'))\n\n# Conecta ao banco na raiz do projeto\nconn = sqlite3.connect(db_path)\n\ndf = pd.read_sql_query(f\"SELECT * FROM proposicoes\", conn).sort_values('Ano', ascending=False, ignore_index=True)\n\nnr_proposicoes = formatar_numero_brl(len(df), casas_decimais=0)\n\nlegislaturas = pd.read_sql_query(f\"SELECT * from legislaturas\", conn)\n\nlegislaturas['dataInicio'] = pd.to_datetime(legislaturas['dataInicio'], format='%Y-%m-%d')\n\n# Fechar conexão\nconn.close()\n\ninicio_legislaturas_ano = legislaturas['dataInicio'].dt.year\n\n\nDelimitei para esta análise todo o período disponibilizado (1959-2025) resultando na coleta de 193.128 proposicões. A Tabela 1 apresenta uma amostra destes dados. Como informações básicas temos o tipo, número e ano da proposição, o resumo (Ementa), temas (Indexacao) e em que fase do processo legislativo se encontra a proposição.\n\n\n\n\nTabela 1: Amostra dos dados sobre proposições legislativas\n\n\n\n\n\n\n\n\n\n\nCodigo\nTipoProposicao\nSiglaTipoProposicao\nNumero\nAno\nEmenta\nIndexacao\nSituacao\nDataPublicacao\nDataAtualizacao\nDataUltimaAcao\nRegime\nResumo\nOrigem\nLocal\nNomeFaseAtual\nLegislatura\nAutores\nLinkTextos\nano_arquivo\n\n\n\n\n0\nRQC 14967/2025\nREQUERIMENTO DE COMISSÃO\nRQC\n14967\n2025\n\n\nAprovado\n28/06/2025\n30/06/2025\n25/06/2025\nVotado nas comissões\n\n\nComissão de Educação Ciência e Tecnologia\n\n20\n[{\"id\":26098,\"nome\":\"Deputada Beatriz Cerqueir...\nhttps://dadosabertos.almg.gov.br/api/proposico...\n2025\n\n\n1\nRQC 12825/2025\nREQUERIMENTO DE COMISSÃO\nRQC\n12825\n2025\n\n/Destinatários/Mulher\\n/Tema/Administração Púb...\nAguardando publicação do requerimento\n\n10/06/2025\n01/04/2025\nVotado nas comissões\n\n\nComissão de Defesa dos Direitos da Mulher\n\n20\n[{\"id\":19150,\"nome\":\"Deputada Ana Paula Siquei...\nhttps://dadosabertos.almg.gov.br/api/proposico...\n2025\n\n\n2\nPL 3536/2025\nPROJETO DE LEI\nPL\n3536\n2025\nAcrescenta artigo à Lei 22256, de 26 de julho ...\n/Tema/Finanças Públicas/Despesas Públicas/Inve...\nAguardando parecer em comissão\n03/04/2025\n29/05/2025\n11/04/2025\nDeliberação em dois turnos no Plenário\nAltera a Lei que institui a política de atendi...\n\nComissão de Constituição e Justiça\nPrimeiro turno nas Comissões\n20\n[{\"id\":28869,\"nome\":\"Deputada Lohanna\",\"partid...\nhttps://dadosabertos.almg.gov.br/api/proposico...\n2025\n\n\n3\nPL 3537/2025\nPROJETO DE LEI\nPL\n3537\n2025\nDispõe sobre a criação do prêmio Ângela Diniz ...\n/Tema/Segurança Pública/Crime/Crime Contra a P...\nAguardando parecer em comissão\n03/04/2025\n14/04/2025\n11/04/2025\nDeliberação em turno único no Plenário\n\n\nComissão de Constituição e Justiça\nTurno único nas Comissões\n20\n[{\"id\":28869,\"nome\":\"Deputada Lohanna\",\"partid...\nhttps://dadosabertos.almg.gov.br/api/proposico...\n2025\n\n\n4\nPL 3538/2025\nPROJETO DE LEI\nPL\n3538\n2025\nReconhece como de relevante interesse cultural...\n/Tema/Indústria, Comércio e Serviços/Produto A...\nAguardando parecer em comissão\n03/04/2025\n14/04/2025\n11/04/2025\nDeliberação em dois turnos no Plenário\n\n\nComissão de Constituição e Justiça\nPrimeiro turno nas Comissões\n20\n[{\"id\":22521,\"nome\":\"Deputado Noraldino Júnior...\nhttps://dadosabertos.almg.gov.br/api/proposico...\n2025\n\n\n\n\n\n\n\n\n\n\nDestaca-se ainda a coluna “Autores” que comporta um dicionário com a lista de parlamentares ou outro tipos entes que participaram da autoria da proposição. A tabela oference ainda link para download do texto completo.\n\nCódigo\nimport numpy as np\nfrom funcoes.Figuras import create_line_chart_go, create_time_series_chart_go\nfrom funcoes.utils import preprocessar_proposicao_media_movel\n\n# Checar valores nulos\n\nvalores_nulos_data = df[df['DataPublicacao'].isnull()]\n\nnr_valores_nulos_data = formatar_numero_brl(len(valores_nulos_data),casas_decimais=0)\n\ndf['data'] = np.where(df['DataPublicacao'].notnull(), df['DataPublicacao'], df['DataAtualizacao'])\n\ndf['data'] = pd.to_datetime(df['data'], format='%d/%m/%Y')\n\ndf['ano'] = df['data'].dt.year\n\ncontagem_ano = df['ano'].value_counts().reset_index()\n\ncontagem_ano.columns = ['ano', 'contagem']\n\ncontagem_ano.sort_values('ano', ignore_index=True, inplace=True)\n\nfig = create_line_chart_go(\n    data=contagem_ano,\n    x_col='ano',\n    y_col='contagem',\n    title='',\n    line_color='green',\n    line_width=3,\n    height=400\n)\n\nfor ano in inicio_legislaturas_ano:\n    if ano &gt;= 1959:\n      fig.add_shape(\n        type=\"line\",\n        x0=ano,\n        y0=0,\n        x1=ano,\n        y1=1,\n        xref='x',\n        yref='paper',\n        line=dict(color=\"red\", width=2, dash=\"dash\")\n    )\n\nproprosicao_media_movel = preprocessar_proposicao_media_movel(df, window=10)\n\n# Step 2: Create chart using the new function\nfig_media_movel = create_time_series_chart_go(\n    data=proprosicao_media_movel,\n    date_col='date',\n    value_col='total_propositions',\n    ma_col='moving_avg_5d',\n    title='',\n    height=500\n)\n\nfor data in legislaturas['dataInicio']:\n  if data &gt;= pd.Timestamp('1959-01-01'):\n    fig_media_movel.add_shape(\n        type=\"line\",\n        x0=data,\n        y0=0,\n        x1=data,\n        y1=1,\n        xref='x',\n        yref='paper',\n        line=dict(color=\"red\", width=2, dash=\"dash\")\n    )\n\nfig.show()\nfig_media_movel.show()\n\n\n\n\n\n\n\n\n\n        \n        \n        \n\n\n(a) Teste\n\n\n\n\n\n\n\n\n                            \n                                            \n\n\n(b) Second\n\n\n\n\n\n\n\n\n\n\n                            \n                                            \n\n\n(c)\n\n\n\n\n\n\n\nFigura 1: Charts\n\n\n\nVamos então observar a evolução de proposições legislativas ao longo do tempo. Primeiramente foi necessário lidar com os dados faltantes, uma vez que há 0 registros sem valores de data de publicação"
  }
]